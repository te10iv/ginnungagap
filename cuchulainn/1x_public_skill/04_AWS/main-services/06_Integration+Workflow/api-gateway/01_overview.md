# API Gateway 概要

## 1. サービスの役割

Amazon API Gatewayは、REST APIやWebSocket APIを作成、公開、維持、監視するためのマネージドサービスです。バックエンドサービス（Lambda、EC2、HTTPエンドポイントなど）へのエントリーポイントとして機能し、認証、レート制限、キャッシングなどの機能を提供します。

## 2. 主なユースケース

- REST APIの作成と公開
- マイクロサービスアーキテクチャのAPIゲートウェイ
- Lambda関数のHTTPエンドポイント
- モバイルアプリケーションのバックエンドAPI
- サーバーレスアプリケーションの構築
- APIのバージョン管理とデプロイ
- APIの認証と認可

## 3. 他サービスとの関係

- **Lambda**: APIのバックエンドとして使用
- **EC2, ECS**: HTTPエンドポイントとして統合
- **Cognito**: ユーザー認証と認可
- **CloudWatch**: APIのメトリクスとログ
- **WAF**: Webアプリケーションファイアウォールとの連携
- **Route 53**: カスタムドメインの設定
- **ACM**: SSL/TLS証明書の管理

## 4. 料金のざっくりイメージ

- **REST API**: 最初の100万リクエスト/月は無料、以降$3.50/100万リクエスト
- **HTTP API**: 最初の100万リクエスト/月は無料、以降$1.00/100万リクエスト
- **WebSocket API**: 最初の100万メッセージ/月は無料、以降$1.00/100万メッセージ
- **データ転送**: リージョン外への転送で料金発生
- **注意**: HTTP APIの方がREST APIより安価

## 5. 初心者がまず覚えるべきポイント

- APIのエントリーポイント（APIゲートウェイ）
- **REST API**: 機能が豊富（認証、キャッシング、リクエスト/レスポンス変換など）
- **HTTP API**: シンプルで高速、低コスト（推奨）
- **WebSocket API**: リアルタイム双方向通信
- ステージ（dev、prodなど）で環境を分離
- デプロイメントでAPIを公開
- 認証（IAM、Cognito、カスタムオーサライザー）
- レート制限とスロットリング
- APIキーでアクセス制御
- カスタムドメインとSSL/TLS証明書の設定

