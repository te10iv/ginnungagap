# ALB 概要

## 1. サービスの役割

Application Load Balancer（ALB）は、アプリケーション層（レイヤー7）で動作するロードバランサーです。HTTP/HTTPSリクエストの内容（パス、ホスト、ヘッダーなど）に基づいて、適切なターゲットにルーティングします。

## 2. 主なユースケース

- マイクロサービスアーキテクチャでのルーティング（パスベース、ホストベース）
- コンテナベースのアプリケーション（ECS、EKS）のロードバランシング
- Webアプリケーションの高可用性とスケーラビリティの実現
- SSL/TLS終端処理
- コンテンツベースのルーティング（URLパス、ホスト名など）
- ターゲットグループごとのヘルスチェック

## 3. 他サービスとの関係

- **EC2**: ターゲットグループにEC2インスタンスを登録
- **ECS, Fargate**: コンテナベースのアプリケーションをロードバランシング
- **Lambda**: Lambda関数をターゲットとして設定可能
- **Route 53**: ALBのDNS名をドメインに設定
- **ACM**: SSL/TLS証明書の管理
- **WAF**: Webアプリケーションファイアウォールとの連携
- **CloudWatch**: メトリクスとログの監視

## 4. 料金のざっくりイメージ

- ALB: 約$0.0225/時間（約$16/月）
- LCU（Load Balancer Capacity Unit）: 使用量に応じて課金
  - 新しい接続: $0.008/1,000接続
  - アクティブな接続: $0.008/時間
  - 処理されたバイト: $0.008/GB
  - ルール評価: $0.008/1,000ルール評価

## 5. 初心者がまず覚えるべきポイント

- レイヤー7（アプリケーション層）で動作
- パスベースルーティング（/api → APIサーバー、/web → Webサーバー）
- ホストベースルーティング（api.example.com、web.example.com）
- ターゲットグループごとにヘルスチェックを設定
- IPアドレスベースのルーティング（クライアントIPに基づく）
- Lambda関数をターゲットとして設定可能
- 複数のリスナー（HTTP、HTTPS）を設定可能

