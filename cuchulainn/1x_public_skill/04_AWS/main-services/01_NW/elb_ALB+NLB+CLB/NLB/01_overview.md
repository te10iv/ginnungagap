# NLB 概要

## 1. サービスの役割

Network Load Balancer（NLB）は、ネットワーク層（レイヤー4）で動作するロードバランサーです。TCP、UDP、TLSトラフィックを処理し、低レイテンシーと高スループットを実現します。固定IPアドレスを提供し、エクスターナルロードバランサーとして動作します。

## 2. 主なユースケース

- 低レイテンシーが求められるアプリケーション
- 高スループットが必要なアプリケーション
- TCP/UDPベースのプロトコル（ゲームサーバー、IoTなど）
- 固定IPアドレスが必要なアプリケーション
- プライベートリンク（VPC Endpoint Service）のバックエンド
- ゾーン固定（クライアントIPに基づくルーティング）

## 3. 他サービスとの関係

- **EC2**: ターゲットグループにEC2インスタンスを登録
- **ECS, Fargate**: コンテナベースのアプリケーションをロードバランシング
- **PrivateLink**: VPC Endpoint Serviceのバックエンドとして使用
- **Route 53**: NLBのDNS名をドメインに設定
- **CloudWatch**: メトリクスとログの監視
- **VPC**: パブリックまたはプライベートサブネットに配置

## 4. 料金のざっくりイメージ

- NLB: 約$0.0225/時間（約$16/月）
- NLCU（Network Load Balancer Capacity Unit）: 使用量に応じて課金
  - 新しい接続: $0.006/1,000接続
  - アクティブな接続: $0.006/時間
  - 処理されたバイト: $0.006/GB
- 固定IPアドレス: 無料（NLBの標準機能）

## 5. 初心者がまず覚えるべきポイント

- レイヤー4（ネットワーク層）で動作
- ALBより低レイテンシーで高スループット
- 固定IPアドレスを提供（各AZごとに1つ）
- TCP、UDP、TLSプロトコルに対応
- ターゲットタイプ: インスタンス、IP、Lambda（UDPはLambda非対応）
- ゾーン固定機能でクライアントIPに基づくルーティングが可能
- PrivateLinkのバックエンドとして使用されることが多い
- ALBと異なり、パスベースやホストベースのルーティングは不可

