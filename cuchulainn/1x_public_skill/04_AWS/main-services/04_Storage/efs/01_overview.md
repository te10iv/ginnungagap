# EFS 概要

## 1. サービスの役割

Amazon EFS（Elastic File System）は、マネージドのネットワークファイルシステム（NFS）です。複数のEC2インスタンスから同時にアクセスでき、自動スケーリング、高可用性を提供します。Linuxベースのアプリケーションで使用されます。

## 2. 主なユースケース

- 複数のEC2インスタンス間でのファイル共有
- コンテナアプリケーション（ECS、EKS）での共有ストレージ
- コンテンツ管理システム（CMS）の共有ストレージ
- ビッグデータ分析でのデータ共有
- Webサーバーのコンテンツ共有
- アプリケーションログの集約

## 3. 他サービスとの関係

- **EC2**: EC2インスタンスからEFSにマウント
- **ECS, EKS**: コンテナからEFSにマウント
- **Lambda**: Lambda関数からEFSにマウント（2020年12月から）
- **VPC**: EFSはVPC内に作成
- **Security Group**: ファイルシステムへのアクセス制御
- **CloudWatch**: メトリクスとログの監視
- **Backup**: EFSのバックアップサービス

## 4. 料金のざっくりイメージ

- **ストレージ**: GBあたり$0.30/月（Standard、最初の50TB）
- **プロビジョンドスループット**: MB/sあたり$0.05/時間（Provisioned Throughputモード）
- **バーストスループット**: ストレージに含まれる（Bursting Throughputモード）
- **データ転送**: リージョン外への転送で料金発生
- **注意**: EBSより高価だが、複数インスタンスから同時アクセス可能

## 5. 初心者がまず覚えるべきポイント

- ネットワークファイルシステム（NFS v4.1）
- 複数のEC2インスタンスから同時にマウント可能
- 自動スケーリング（容量とパフォーマンス）
- マルチAZで高可用性（Standard、One Zone）
- スループットモード（Bursting、Provisioned、Elastic）
- パフォーマンスモード（General Purpose、Max I/O）
- ライフサイクル管理（自動的にIA（Infrequent Access）ストレージクラスに移行）
- 暗号化（転送時と保存時）
- Lambda関数からもマウント可能
- Linuxベースのアプリケーションのみ対応（Windowsは非対応）

