# EFS マネージドコンソールでのセットアップ

## 作成するもの

EFSファイルシステムを作成し、複数のEC2インスタンスから共有アクセスできるようにします。コンテンツ管理システムなどで使用します。

## セットアップ手順

1. **EFSコンソールを開く**
   - AWSマネージメントコンソールで「EFS」を検索して選択

2. **ファイルシステムを作成**
   - 「ファイルシステムを作成」をクリック

3. **カスタマイズ**
   - **名前**: `my-efs` を入力
   - **可用性と耐久性**: リージョン（推奨）を選択

4. **ネットワークアクセス**
   - **VPC**: 作成済みのVPCを選択
   - **マウントターゲット**: 複数のAZのサブネットを選択
   - **セキュリティグループ**: 新しいセキュリティグループを作成（NFSポート2049を許可）

5. **ファイルシステムポリシー**
   - デフォルトのまま

6. **確認と作成**
   - 設定を確認
   - 「作成」をクリック

7. **EC2インスタンスからマウント**
   - ファイルシステムを選択
   - 「アタッチ」をクリック
   - 表示されたマウントコマンドをコピー
   - EC2インスタンスにSSH接続してコマンドを実行：
   ```bash
   # マウントヘルパーをインストール
   sudo yum install -y amazon-efs-utils
   
   # マウント
   sudo mount -t efs <ファイルシステムID>:/ /mnt/efs
   ```

## 補足

- EFSは複数のEC2インスタンスから同時にマウント可能です
- 自動的にスケーリングされます

