# CloudTrail 概要

## 1. サービスの役割

AWS CloudTrailは、AWSアカウント内のAPI呼び出しとアクティビティを記録する監査・コンプライアンスサービスです。誰が、いつ、どこで、何をしたかを記録し、セキュリティ分析、リソース変更の追跡、コンプライアンス監査に使用されます。

## 2. 主なユースケース

- API呼び出しの監査ログ
- セキュリティインシデントの調査
- コンプライアンス要件の満たすための監査証跡
- リソース変更の追跡
- 不正アクセスの検出
- 運用アクティビティの可視化
- ガバナンスとコンプライアンスの強化

## 3. 他サービスとの関係

- **S3**: CloudTrailログの保存先
- **CloudWatch Logs**: CloudTrailログの分析
- **EventBridge**: CloudTrailイベントのルーティング
- **IAM**: ユーザーとロールのアクティビティを記録
- **すべてのAWSサービス**: API呼び出しを記録

## 4. 料金のざっくりイメージ

- **イベント**: 最初の100,000イベント/月は無料、以降$2.00/100,000イベント
- **データイベント**: $0.10/100,000イベント（S3、Lambdaなどのデータ操作）
- **CloudTrail Lake**: クエリあたり$0.00500/GBスキャン
- **注意**: データイベントを有効にするとコストが高くなる

## 5. 初心者がまず覚えるべきポイント

- API呼び出しの監査ログサービス
- 管理イベント（リソースの作成、変更、削除など）を自動的に記録
- データイベント（S3オブジェクトの読み取り、Lambda関数の呼び出しなど）はオプション
- ログはS3バケットに保存（暗号化可能）
- CloudTrail Lake（ログの分析とクエリ）
- マルチリージョン対応（すべてのリージョンで有効化可能）
- 組織単位での統合（AWS Organizationsと連携）
- イベント履歴（過去90日間のイベントを表示）
- ログファイルの整合性検証

