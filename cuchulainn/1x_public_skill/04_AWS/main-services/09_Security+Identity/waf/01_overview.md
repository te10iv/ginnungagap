# WAF 概要

## 1. サービスの役割

AWS WAF（Web Application Firewall）は、Webアプリケーションを保護するファイアウォールサービスです。SQLインジェクション、クロスサイトスクリプティング（XSS）、DDoS攻撃などの一般的なWeb攻撃からアプリケーションを保護します。

## 2. 主なユースケース

- Webアプリケーションの保護（SQLインジェクション、XSSなど）
- DDoS攻撃の緩和
- レート制限（IPアドレスやリクエストパターンに基づく）
- 地理的制限（特定の国からのアクセスをブロック）
- ボット対策
- APIの保護
- カスタムルールの作成

## 3. 他サービスとの関係

- **CloudFront**: CloudFrontディストリビューションを保護
- **ALB**: アプリケーションロードバランサーを保護
- **API Gateway**: REST APIとHTTP APIを保護
- **AppSync**: GraphQL APIを保護
- **Shield**: DDoS保護と連携
- **CloudWatch**: WAFのメトリクスとログ

## 4. 料金のざっくりイメージ

- **Web ACL**: Web ACLあたり$5/月
- **ルール**: ルールあたり$1/月（最初の10ルールは無料）
- **リクエスト**: 100万リクエストあたり$1（最初の100万リクエスト/月は無料）
- **注意**: 保護するリソース数とルール数に応じて課金

## 5. 初心者がまず覚えるべきポイント

- Webアプリケーションファイアウォール（レイヤー7の保護）
- CloudFront、ALB、API Gateway、AppSyncにアタッチ
- **マネージドルール**: AWSやパートナーが提供するルールセット
- **カスタムルール**: 独自のルールを作成
- ルールの優先順位（数値が小さいほど優先）
- アクション（Allow、Block、Count）
- レート制限ルール（IPアドレスやリクエストパターンに基づく）
- 地理的制限（特定の国からのアクセスをブロック）
- CloudWatchメトリクスでWAFの効果を監視
- WAFログをS3やCloudWatch Logsに送信

