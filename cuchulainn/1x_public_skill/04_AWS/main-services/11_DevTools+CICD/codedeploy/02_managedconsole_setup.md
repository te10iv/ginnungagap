# CodeDeploy マネージドコンソールでのセットアップ

## 作成するもの

CodeDeployアプリケーションとデプロイメントグループを作成し、EC2インスタンスにアプリケーションをデプロイします。

## セットアップ手順

1. **CodeDeployコンソールを開く**
   - AWSマネージメントコンソールで「CodeDeploy」を検索して選択

2. **アプリケーションを作成**
   - 「アプリケーションを作成」をクリック
   - **アプリケーション名**: `my-app` を入力
   - **コンピューティングプラットフォーム**: EC2/オンプレミスを選択
   - 「アプリケーションを作成」をクリック

3. **デプロイメントグループを作成**
   - 作成したアプリケーションを選択
   - 「デプロイメントグループを作成」をクリック
   - **デプロイメントグループ名**: `my-deployment-group` を入力
   - **サービスロール**: CodeDeployサービスロールを選択
   - **環境設定**: EC2インスタンスを選択
   - **タググループ**: EC2インスタンスのタグを設定（例: Name=my-instance）
   - **デプロイメント設定**: CodeDeployDefault.AllAtOnceを選択
   - 「デプロイメントグループを作成」をクリック

4. **EC2インスタンスにCodeDeployエージェントをインストール**
   - EC2インスタンスにSSH接続
   - 以下のコマンドを実行：
   ```bash
   sudo yum update -y
   sudo yum install -y ruby
   cd /home/ec2-user
   wget https://aws-codedeploy-ap-northeast-1.s3.ap-northeast-1.amazonaws.com/latest/install
   chmod +x ./install
   sudo ./install auto
   ```

5. **デプロイメントを作成**
   - デプロイメントグループを選択
   - 「デプロイメントを作成」をクリック
   - **リビジョンタイプ**: S3を選択
   - **S3バケット**: アプリケーションファイルをアップロードしたS3バケットを選択
   - **S3キー**: ファイルのパスを入力
   - 「デプロイメントを作成」をクリック

## 補足

- appspec.ymlファイルでデプロイメント手順を定義します
- デプロイメントの進行状況をコンソールで確認できます

